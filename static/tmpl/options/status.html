<h2>통계</h2>
<hr>
<div class="row">

    <div class="col-lg-12">
        <div class="grid">
            <p class="grid-header">주간 통계</p>
            <div class="item-wrapper">
                <div>
                    <p style="padding-left: 30px;font-size: 16px;color:#969696">{{ model.charts.day.title }}</p>
                    <p style="padding-left: 30px;font-size: 20px;color:#3d3c3c;font-weight:bolder">{{ model.total_times
                        | convertSummaryTimeToString }}</p>
                </div>
                <mw-chart style="width:100%;height:250px;top:-50;bottom:20px;left:30px;" ng-model="param">
                </mw-chart>
            </div>
        </div>
        <div class="grid">
            <!-- <p class="grid-header">{{ model.day_title }} - {{ model.total_times | convertSummaryTimeToString}}</p> -->
            <div class="item-wrapper">
                <mw-chart style="width:100%;height:200px;left:30px;" ng-model="param1">
                </mw-chart>
            </div>
        </div>
    </div>

    <div class="col-lg-12">
        <!-- <button class="col-md-2 btn btn-danger" ng-click="today()" type="submit">오늘 통계</button>
        <button class="col-md-2 btn btn-danger" ng-click="all()" type="submit">전체 통계</button> -->
        <div class="grid">
            <p class="grid-header">{{ model.show_full_list }} {{ model.day_title }} 사용현황 | {{ model.totals.times |
                convertSummaryTimeToString}} </p>
            <div class="item-wrapper">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <!-- <th>fav</th> -->
                                <th>#</th>
                                <th>도메인</th>
                                <th>접속</th>
                                <th>사용량</th>
                                <th>사용 시간</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="row in model.rows">
                                <td>{{ $index+1}}</td>
                                <td>
                                    <a href ng-click="run.info(row)" data-toggle="modal"
                                    data-target="#domainModal">{{ row.url }}</a> <i
                                        class="mdi mdi-link-variant"></i>
                                    <div>
                                        <code>{{ row.category_sub | category_to_name }}</code>
                                    </div>
                                </td>
                                <td class="text-info">
                                    {{ row.part.counter | num_comma }} <em class="mdi mdi-arrow-up"></em>
                                    <div class="progress progress-slim mt-2">
                                        <div class="progress-bar bg-danger" role="progressbar"
                                            style="width: {{ row.part.counter | percentage:model.totals.counter  }}%"
                                            aria-valuenow="{{ row.part.counter | percentage:model.totals.counter }}"
                                            aria-valuemin="0" aria-valuemax="100">
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    {{ row.part.dataUsage | dataSizeToUnit }}
                                    <div class="progress progress-slim mt-2">
                                        <div class="progress-bar bg-success" role="progressbar"
                                            style="width: {{ row.part.dataUsage | percentage:model.totals.dataUsage  }}%"
                                            aria-valuenow="{{ row.part.dataUsage | percentage:model.totals.dataUsage }}"
                                            aria-valuemin="0" aria-valuemax="100">
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    {{ row.part.summary | convertSummaryTimeToString }}
                                    <div class="progress progress-slim mt-2">
                                        <div class="progress-bar bg-primary" role="progressbar"
                                            style="width: {{ row.part.summary | percentage:model.totals.times  }}%"
                                            aria-valuenow="{{ row.part.summary | percentage:model.totals.times }}"
                                            aria-valuemin="0" aria-valuemax="100">
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false" role="dialog" id="domainModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form>
                <div class="modal-header bg-primary">
                    <h3 class="modal-title text-white">{{ model.title }}</h3>
                    <button type="button" class="close text-white" ng-click="run.modalClose()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="inputEmail4">종류</label>
                        <div class="grid">
                            <!-- <p class="grid-header">{{ model.day_title }} - {{ model.total_times | convertSummaryTimeToString}}</p> -->
                            <div class="item-wrapper">
                                <mw-chart style="width:450px;height:200px;left:10px;" ng-model="param1">
                                </mw-chart>
                            </div>
                        </div>
                    </div>

                    <hr>
                    <div class="form-group">
                        <label for="inputEmail4">설정</label>
                        <div class="form-inline">
                            <div ng-if="model.is_new" class="checkbox mb-3">
                                <label>
                                    <input type="checkbox" class="form-check-input" ng-model="model.modal.remind"> 정기적으로
                                    남은 시간 알람 <i class="input-frame"></i>
                                </label>
                            </div>

                            <div ng-if="!model.is_new" class="checkbox mb-3">
                                <label>
                                    <input type="checkbox" class="form-check-input" ng-model="model.copy_modal.remind">
                                    정기적으로
                                    남은 시간 알람 <i class="input-frame"></i>
                                </label>
                            </div>


                            <div ng-if="model.is_new" class="checkbox mb-3">
                                <label>
                                    <input type="checkbox" class="form-check-input" ng-model="model.modal.repeat"> 알람
                                    완료시 반복 <i class="input-frame"></i>
                                </label>
                            </div>
                            <div ng-if="!model.is_new" class="checkbox mb-3">
                                <label>
                                    <input type="checkbox" class="form-check-input" ng-model="model.copy_modal.repeat">
                                    알람
                                    완료시 반복 <i class="input-frame"></i>
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- <hr > -->
                    <div class="form-group">
                        <label>알람 위치</label>
                        <select ng-if="model.is_new" class="custom-select" ng-change="run.selected(model.select)"
                            ng-model='model.select' ng-options="item.id as item.name for item in model.options">
                        </select>

                        <select ng-if="!model.is_new" class="custom-select" ng-change="run.selected(model.select)"
                            ng-model='model.select' ng-options="item.id as item.name for item in model.options">
                        </select>

                    </div>

                    <div class="form-group">
                        <label>알람 메세지</label>
                        <textarea ng-if="model.is_new" class="form-control" id="inputType9" rows="2"
                            ng-model="model.modal.message"></textarea>
                        <textarea ng-if="!model.is_new" class="form-control" id="inputType9" rows="2"
                            ng-model="model.copy_modal.message"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" ng-if="model.is_new" ng-click="run.add_alarm()"
                        class="btn btn-primary btn-sm">저장</button>
                    <button type="submit" ng-if="!model.is_new" ng-click="run.update_alarm()"
                        class="btn btn-primary btn-sm">수정</button>
                    <button type="submit" ng-if="!model.is_new" ng-click="run.remove_alarm()"
                        class="btn btn-danger  btn-sm">삭제</button>
                    <button type="submit" ng-click="run.modalClose()" class="btn btn-primary btn-sm">닫기</button>
                </div>
            </form>
        </div>
    </div>
</div>